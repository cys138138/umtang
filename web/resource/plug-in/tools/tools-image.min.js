!function(t){var e={parseDataURL:function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=-1,n=e.charAt(64);n&&(a=t.indexOf(n));for(var r=a!=-1?a:t.length,i=0,o=new ArrayBuffer(r),h=new Uint8Array(o),c=0;c<r;c++)if(c%4){var d=e.indexOf(t.charAt(c-1))<<c%4*2,g=e.indexOf(t.charAt(c))>>>6-c%4*2;h[i]=255&(d|g),i++}return h},parseToFile:function(t,e){var a=t.match(/^data:([\w\/]+)/),n=a&&a[1],r=this.parseDataURL(t.replace(/^.*,/,"")),i=new DataView(r.buffer),o=new Blob([i],{type:n});return o},resizeImage:function(t,e,a,n){var r=document.createElement("canvas");if(!r.getContext)return!1;var i,o,h,c,d,g=r.getContext("2d"),f=function(){i=t.src.match(/^data:([\w\/]+)/),o=i&&i[1],h=t.width/e,c=t.height/a,d=Math.max(h,c,1),r.width=t.width/d,r.height=t.height/d,g.drawImage(t,0,0,r.width,r.height),n(r.toDataURL(o,1))};t.complete?f():t.onload=f},cutImage:function(t,e,a,n,r,i){var o=document.createElement("canvas");if(!o.getContext)return!1;var h=o.getContext("2d");o.width=n,o.height=r,t.complete?(h.drawImage(t,e,a,n,r,0,0,n,r),i(o.toDataURL("image/jpeg",1))):t.onload=function(){h.drawImage(t,e,a,n,r,0,0,t.width,t.height),i(o.toDataURL("image/jpeg",1))}}};t.Tools=$.extend(t.Tools,e)}(window);