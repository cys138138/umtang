void 0===window.pageTemplate&&(window.pageTemplate={}),window.pageTemplate.umtMapSelector="<style>.umt-map-selector{text-align:initial;padding:20px;border:1px solid #d1dee1}.umt-map-selector input{width:250px}.umt-map-selector input::placeholder{font-size:12px}.umt-map-selector button{font-size:16px;color:#fff;background-color:#00b9ed;cursor:pointer}.umt-map-selector input,.umt-map-selector select{margin-right:20px}.umt-map-selector button,.umt-map-selector input,.umt-map-selector select{display:inline-block;vertical-align:top;min-width:100px;height:40px;border:1px solid #d1dee1;border-radius:5px;box-sizing:border-box}.umt-map-selector>.map-ctn{height:450px;margin-top:20px;border:1px solid #d1dee1;border-radius:5px}@media screen and (max-width:640px){.umt-map-selector{padding:0}.umt-map-selector button,.umt-map-selector input,.umt-map-selector select{min-width:initial;margin-right:0;box-sizing:border-box}.umt-map-selector select{width:30%;min-width:inherit;box-sizing:border-box}.umt-map-selector select:nth-child(2){margin:0 5%}.umt-map-selector input{width:65%;margin:5% 5% 0 0}.umt-map-selector button{width:30%;margin-top:5%}.umt-map-selector>.map-op{padding:10px 10px 0}.umt-map-selector>.map-ctn{height:200px;margin-top:5%}}</style><div class=umt-map-selector><div class=map-op><select class=J-province title=省></select><select class=J-city title=市></select><select class=J-area title=区></select><input type=text class=J-detail placeholder=请输入详细地址，精确到门牌号码><button class=J-location-btn>搜索</button></div><div class=\"J-map-ctn map-ctn\"></div></div>";window.UmtMapSelector={EVENT_INIT_MAP_FINISH:"event_init_map_finish",data:{initMap:!1,pos:""},build:function(t){var a=window.pageTemplate.umtMapSelector,i=$(a),o=this,n=i.find(".J-province"),e=i.find(".J-city"),c=i.find(".J-area"),d=function(t){new AreaSelector({$province:n,$city:e,$area:c,defaultArea:t}).init()};return t&&(o.data.pos={adcode:t.adcode,lat:t.location.lat,lng:t.location.lng},i.find(".J-detail").val(t.address),i.data({address:t.address,location:t.location})),d(),o.initLocation(),o.initMap(),i.find(".J-location-btn").click(function(){var t,a,d=["省份","城市","区域"],s=[n.find("option:selected").text(),e.find("option:selected").text(),c.find("option:selected").text()],p=i.find(".J-detail").val();for(a=0;a<s.length;++a)"请选择"==s[a]&&(t="请选择"+d[a]);return p||(t="请填写具体地址"),t?void UNotice.show(t,-1):void o.parseArea(["中国",s[0],s[1],s[2],p],function(t){i.data({address:s[2]+p,location:t.detail.location}),o.markerMap(i.find(".J-map-ctn")[0],t.detail.location)})}),window.addEventListener("message",function t(a){a.source==window&&event.data==o.EVENT_INIT_MAP_FINISH&&o.data.pos&&(d(o.data.pos.adcode),o.markerMap(i.find(".J-map-ctn")[0],o.data.pos),window.removeEventListener("message",t))},!1),i},parseData:function(t){return{address:t.data("address"),location:t.data("location")}},parseArea:function(t,a){return this.data.initMap?void new qq.maps.Geocoder({complete:function(t){UNotice.show("定位成功",1),a(t)}}).getLocation(t.join(",")):void UNotice.show("地图组件初始化中...",-1)},markerMap:function(t,a){if(this.data.initMap&&a){var i=new qq.maps.LatLng(a.lat,a.lng),o=new qq.maps.Map(t,{center:i,zoom:13});new qq.maps.Marker({position:i,map:o})}},initLocation:function(){if(!this.data.initMap&&!this.data.pos){var t=this,a=document.createElement("script"),i=function(a){t.data.pos=a,window.postMessage(t.EVENT_INIT_MAP_FINISH,location.origin)};a.src=location.protocol+"//apis.map.qq.com/tools/geolocation/min?key=52OBZ-UKAKF-EPQJB-NQHNE-SWHI3-DHF6O&referer=优满堂",a.type="text/javascript",a.onload=function(){(new qq.maps.Geolocation).getLocation(function(t){i(t)},function(){(new qq.maps.Geolocation).getIpLocation(function(t){i(t)},function(){UNotice.show("定位失败",-1)})})},document.head.appendChild(a)}},initMap:function(){if(!this.data.initMap){var t=document.createElement("script");t.src=location.protocol+"//map.qq.com/api/js?v=2.exp&key=52OBZ-UKAKF-EPQJB-NQHNE-SWHI3-DHF6O&callback=UmtMapSelector.initMapCallback",t.type="text/javascript",document.head.appendChild(t)}},initMapCallback:function(){var t=this;t.data.initMap=!0,window.postMessage(t.EVENT_INIT_MAP_FINISH,location.href)}};