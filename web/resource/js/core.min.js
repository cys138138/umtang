function ajax(e){function t(t){$.ajax(e).always(function(){delete AjaxBlockList[e.url]}).done(function(i,n,a){return o&&"function"==typeof o?void o(i):void(1==i.status?t.resolve(i,n,a):(t.reject(i,n,a),void 0==e.silence&&UNotice.show(i.msg,i.status)))}).fail(function(e,i,n){e.getResponseHeader&&e.getResponseHeader("X-Redirect")?location.href=e.getResponseHeader("X-Redirect"):(t.reject(n,i,e),UNotice.show(n,0))})}if(void 0==window.UNotice&&(window.UNotice=window.UBox||{show:function(e){alert(e)}}),!e.url)return $.error("ajax方法缺少url配置"),null;if(AjaxBlockList[e.url]&&!e.unblock)return null;if(e.type=e.type||"post",e.dataType=e.dataType||"json","post"==e.type){var i,n=$('meta[name="csrf-token"]').attr("content");e.data=e.data||{},i=typeof e.data,"object"==i&&void 0==e.data._csrf&&(e.data._csrf=n)}AjaxBlockList[e.url]=!0;var o=e.success;return delete e.success,$.Deferred(t).promise()}function serializeObject(e){var t,i,n={},o='[type="checkbox"]',a=e.serializeArray();return e.find(o).add(e.filter(o)).each(function(){n[this.name]=0}),$.each(a,function(){t=this.name,i=this.value,void 0!=n[t]?(n[t].push||(n[t]=[]),n[t].push(i)):n[t]=i||""}),n}window.resourceUrl=$("<a>").attr("href",$('script[src*="core.min.js"]').attr("src")).prop("origin"),window.AjaxBlockList={},window.PageBase=function(){var e={selector:"",template:"",templateUrl:""};this.config=function(t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},this.show=function(){var e=this;if(e.getConfig("template"))return e.initPage(),e.onReady(),void e.validateForm();var t=e.getConfig("templateUrl");t&&$.get(t,function(t){e.setTemplate(t),e.initPage(),e.onReady(),e.validateForm()})},this.hide=function(){this.root().empty()},this.initPage=function(){var e=this,t=e.getConfig("selector"),i=e.getConfig("template");$(i).appendTo($(t))},this.onReady=function(){window.postMessage(window.PageBase.EVENT_READY,location.href)},this.getConfig=function(t){return e[t]},this.setTemplate=function(t){e.template=t},this.getTemplate=function(){return e.template},this.root=function(){return $(e.selector)},this.validateForm=function(){void 0==window.UNotice&&(window.UNotice=window.UBox||{show:function(e){alert(e)}}),$("form").attr("novalidate","novalidate").on("click",'button,input[type="submit"]',function(){var e="";if($(this).parents("form").find("input:visible, textarea:visible").each(function(){if(!this.validity.valid&&(e=this.value?this.validity.patternMismatch?this.title:this.validity.customError?this.validationMessage:this.title||this.validationMessage:this.placeholder||this.title))return!1}),e)return UNotice.show(e,-1),!1})}},window.PageBase.EVENT_READY="page_event_ready",window.PageBase.cloneChild=function(e,t,i,n){if(0==t)return $([]);var o,a=i.find(e),r=a.last();if(!a[0])return $.error("select "+e+" without element!"),!1;for(var s=0;s<t;++s)a[s]||(o=r.clone(n),r.after(o),r=o);return a.slice(s).remove(),i.find(e)},window.PageBase.cloneItem=function(e,t,i,n){if(!e||0==e.length)return $.error("select without element!"),!1;if(0==t)return $([]);for(var o,a=e.length,r=e.last(),s=0;s<t;++s)e[s]&&i||(o=r.clone(n),r.after(o),r=o,e.push(o));return i?(e.slice(s).remove(),e.slice(0,s)):e.slice(a)},window.PageBase.init=function(e){return e.prototype=new window.PageBase,e.prototype.constructor=e,e.prototype.cloneChild=window.PageBase.cloneChild,e.prototype.cloneItem=window.PageBase.cloneItem,e},window.PageBase.create=function(){var e=window.PageBase.init(function(){});return new e};