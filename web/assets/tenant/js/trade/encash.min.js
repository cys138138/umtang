window.Encash=window.PageBase.init(function(){function e(e){var t,n=60;e.val(n+"s后重新获取"),t=setInterval(function(){--n,0==n?(clearInterval(t),e.prop("disabled",!1).val("发送验证码")):e.val(n+"s后重新获取")},1e3)}this.initPage=function(){var t=this,n=t.getConfig("selector"),o=t.getTemplate(),i=$(o);i.find(".J-encash").attr("href",t.getConfig("encashUrl")),i.find(".J-order").attr("href",t.getConfig("orderUrl")),i.find(".J-history").attr("href",t.getConfig("historyUrl"));var a=t.getConfig("aInfo");i.find(".J-amount-evaluate").text(a.new_comment_count),i.find(".J-amount-order").text(a.new_order_count),i.find(".J-amount-income").text(Tools.parsePrice(a.total_order_price));var r=t.getConfig("aFund"),f=t.getConfig("aLimit"),s=Tools.parsePrice(Math.min(r.money,f.remainMoney)),d=r.bank_name.split("-");i.find(".J-day-limit").text(f.fullMoney/1e6|0),i.find(".J-fund-type").text(r.bank_accout_type_name),i.find(".J-fund-account").text(r.bank_accout),i.find(".J-fund-user").text(r.bank_account_holder),i.find(".J-fund-bank").text(d[0]||""),i.find(".J-fund-bank-sub").text(d[1]||""),i.find(".J-money").text(s),i.find(".J-verify").click(function(){var n=$(this),o=i.find('input[name="money"]').val();return d[1]?s<parseFloat(o)?void UNotice.show("可提取金额不足",-1):void ajax({url:t.getConfig("verifyUrl"),data:{money:Tools.restorePrice(o)}}).done(function(t){e(n),n.prop("disabled",!0),UNotice.show(t.msg,t.status)}):void UNotice.confirm("银行信息不完整","您还不能进行提现，请先完善商户信息——认证信息——结算账户，填写开户支行！")}),i.find(".J-form").on("submit",function(){var e=this,n=serializeObject($(e));return s<parseFloat(n.money)?(UNotice.show("可提取金额不足",-1),!1):(n.money=Tools.restorePrice(n.money),ajax({url:t.getConfig("moneyUrl"),data:n}).done(function(t){UNotice.show(t.msg,t.status),1==t.status&&e.reset()}),!1)}),$(n).append(i)}});