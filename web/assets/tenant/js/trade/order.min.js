window.Order=window.PageBase.init(function(){function t(t,a){t.toggleClass("hide",0==a.length),PageBase.cloneItem(t,a.length,!0).each(function(t){var i=$(this),n=a[t];i.find(".J-no").text(n.order_num),i.find(".J-name").text(n.goods_info.name),i.find(".J-amount").text(n.quantity),i.find(".J-price").text(Tools.parsePrice(n.price)),i.find(".J-user").text(n.user_name),i.find(".J-mobile").text(n.mobile),i.find(".J-status").text(e.aStatusDesc[n.status]),i.find(".J-date").text(Tools.date("Y-m-d H:i",n.pay_time))})}var e={aStatusDesc:"",listCache:[]};this.initPage=function(){var a=this,i=a.getConfig("selector"),n=a.getTemplate(),s=$(n);e.aStatusDesc=a.getConfig("aStatusDesc");var d=a.getConfig("orderListUrl"),l=UmtPageNum.build();l.bind(UmtPageNum.EVENT_PAGE_CHANGE,function(a,i){var n=s.find(".J-item"),r=s.find(".J-tab.active").data("type"),o=s.find('[name="timeStatus"]:checked').val(),u=s.find('[name="evaluateStatus"]:checked').val(),c=[r,o,u,i].join("_");if(e.listCache[c])return UmtPageNum.update(l,i),void t(n,e.listCache[c]);var g=10;ajax({url:d,data:{type:r,time:o,status:u,page:i,pageSize:g}}).done(function(a){var s=Math.ceil(a.data.count/g);e.listCache[c]=a.data.list,UmtPageNum.update(l,i,s),t(n,e.listCache[c])})}),s.find(".J-page-num").append(l);var r=s.find(".J-tab"),o=a.getConfig("aTabType");r.click(function(){var t=$(this),e=t.data("type");t.addClass("active").siblings().removeClass("active"),s.find(".J-order-list").toggleClass("show-type-1",1==e).toggleClass("show-type-2",2==e),l.triggerHandler(UmtPageNum.EVENT_PAGE_CHANGE,1)}),PageBase.cloneItem(r,o.length,!0,!0).each(function(t){$(this).attr("data-type",o[t].key).text(o[t].value).toggleClass("active",0==t)});var u=a.getConfig("aTimeStatus");PageBase.cloneItem(s.find(".J-time-status"),u.length,!0,!0).each(function(t){var e=$(this),a=u[t].value;e.find("input").val(u[t].key).prop("checked",0==t),e.find("span").text(u[t].value),0==t&&e.parent().next().text(a)}),u=a.getConfig("aOrderStatus"),PageBase.cloneItem(s.find(".J-evaluate-status"),u.length,!0,!0).each(function(t){var e=$(this),a=u[t].value;e.find("input").val(u[t].key).prop("checked",0==t),e.find("span").text(u[t].value),0==t&&e.parent().next().text(a)}),s.find('input[type="radio"]').change(function(){var t=$(this),e=t.next().text(),a=t.parent().parent();a.addClass("hide"),a.next().text(e),l.triggerHandler(UmtPageNum.EVENT_PAGE_CHANGE,1)}),s.find(".J-radio-current").click(function(){$(this).prev().toggleClass("hide")}),$(i).append(s),l.triggerHandler(UmtPageNum.EVENT_PAGE_CHANGE,1)}});