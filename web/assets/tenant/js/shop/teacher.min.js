window.Teacher=PageBase.init(function(){this.initPage=function(){var e=this,t=e.getConfig("selector"),a=e.getConfig("template"),i=e.getConfig("url"),r=e.getConfig("phpData"),d=$(t).html(a),n=d.find(".J-list"),o=n.find(".J-item").remove();d.find(".J-add").attr("href",i.editUrl.replace("tId",0).replace("time",0)),o.find(".J-del").on("click",function(){var e=$(this).parents(".J-item");UNotice.confirm("确认删除","是否删除"+e.find(".J-name").html()+"教师?",-1,function(){ajax({url:i.delUrl,data:{id:e.data().id,createTime:e.data().createTime,name:e.find(".J-name").html()}}).done(function(t){UNotice.show(t.msg,t.status),1==t.status&&e.remove()})})}),o.find(".J-move").on("click",function(){var e=$(this),t=e.parents(".J-item"),a="up"==e.data("type"),r=a?t.prev():t.next();if(0==r.length){var d=a?"已经是第一个了":"已经是最后一个了";return UNotice.show(d,-1),!1}var n={id:t.data().id,createTime:t.data().createTime,order:r.data().order},o={id:r.data().id,createTime:r.data().createTime,order:t.data().order};ajax({url:i.orderUrl,data:{aOrder:[n,o]}}).done(function(e){UNotice.show(e.msg,e.status),1==e.status&&(r.data(o),t.data(n),a?r.before(t):t.before(r))})});for(var m=0,c=r.length;m<c;m++){var f=o.clone(!0),l=r[m];f.find("img").replaceWith(Ui.buildImage(l.profile_path)),f.find(".J-name").html(l.name),f.find(".J-job").html(l.duty),f.find(".J-year").html(l.seniority),0==l.id?f.find(".J-edit").html("审核中"):f.find(".J-edit").attr("href",i.editUrl.replace("tId",l.id).replace("time",l.create_time)),f.data({id:l.id,order:l.order,createTime:l.create_time}),n.append(f)}}});