window.Server=PageBase.init(function(){this.initPage=function(){function n(n,t){var i,e;for(i=0,e=n.length;i<e;i++){var a=s.clone(),d=n[i];a.attr("data-type",d.id).find("input").val(d.id),a.find(".J-name").html(d.name),"0"==d.tenant_id?f.append(a):l.append(a)}for(i=0,e=t.length;i<e;i++){var c=o.find(".J-item[data-type="+t[i].service_type_id+"]");c.find("input").prop("checked","checked")}}var t=this,i=t.getConfig("selector"),e=t.getConfig("template"),a=t.getConfig("url"),d=t.getConfig("phpData"),o=$(i).html(e),c=o.find(".J-alert"),f=o.find(".J-home-list"),l=o.find(".J-user-list"),s=f.find(".J-item").remove();n(d.listData,d.infoData),o.find(".J-close").on("click",function(){c.hide()}),o.find(".J-add").on("click",function(){c.show()}),o.find(".J-add-btn").on("click",function(){var n=o.find(".J-server-name").val();n.length>=1&&n.length<=5?ajax({url:a.addUrl,data:{name:n}}).done(function(t){if(UNotice.show(t.msg,t.status),1==t.status){var i=s.clone();i.find("input").val(t.data),i.find(".J-name").html(n),l.append(i),c.hide()}}):UNotice.show("服务名称 格式不正确",-1)}),o.find(".J-save").on("click",function(){var n=[];$("input[type=checkbox]:checked").each(function(){n.push($(this).val())}),ajax({url:a.saveUrl,data:{aIds:n}}).done(function(n){UNotice.show(n.msg,n.status)})})}});