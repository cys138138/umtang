window.ShopCheap=PageBase.init(function(){this.initPage=function(){function t(t){var n=r.find("input[name=pay_discount]"),i=r.find("input[name=preferential_info]");if(t.pay_discount.length>0){var e=1*t.pay_discount;if(isNaN(e)||e>100||e<=0||/\./.test(t.pay_discount))return UNotice.show("买单折扣 格式不正确",-1),n.focus(),!1}return t.pay_discount.length<=0&&t.preferential_info.length>0?(UNotice.show("先填写买单折扣",-1),n.focus(),!1):!(t.preferential_info.length>25)||(UNotice.show("优惠信息 格式不正确",-1),i.focus(),!1)}var n=this,i=n.getConfig("selector"),e=n.getConfig("template"),o=n.getConfig("url"),a=n.getConfig("pageUrl"),f=n.getConfig("phpData"),r=$(i).html(e);for(var s in a)r.find(".J-tab-"+s).attr("href",a[s]);for(s in f)r.find("[name="+s+"]").val("0"===f[s]?"":f[s]);r.find("form").on("submit",function(){var n=serializeObject($(this));return t(n)&&ajax({url:o.saveUrl,data:n}).done(function(t){UNotice.show(t.msg,t.status)}),!1})}});