window.TeacherEdit=PageBase.init(function(){this.initPage=function(){function i(){if(r.name){l=r.id,c=r.create_time;for(var i in r)f.find("[name="+i+"]").val(r[i])}f.find("img").replaceWith(Ui.buildImage(r.profile_path))}function e(i){for(var e in i)if(i[e].length<1){var t=f.find("[name="+e+"]").focus();return UNotice.show("请填写"+t[0].title,-1),!1}return!0}var t=this,n=t.getConfig("selector"),a=t.getConfig("template"),o=t.getConfig("url"),r=t.getConfig("phpData"),f=$(n).html(a),l=0,c=0;i(),f.find(".J-header-pic").on("change",function(){Tools.uploadFileHandle(o.uploadUrl,this.files[0],function(i){f.find("img").replaceWith(Ui.buildImage(i.data.path)),f.find("input[name=profile]").val(i.data.resource_id)})}),f.find("form").on("submit",function(){var i=serializeObject($(this));return i.id=l,i.createTime=c,e(i)&&ajax({url:o.saveUrl,data:i}).done(function(i){UNotice.show(i.msg,i.status),1==i.status&&(location.href=o.teacherHomeUrl)}),!1})}});